<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[mini-SWE-agent] Roulette mode! - SWE-bench Blog</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-H9XFCMDPNS"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-H9XFCMDPNS");
    </script>
    <script>
      // Initialize theme immediately to prevent flash
      (function() {
        const storedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
          document.documentElement.classList.add('dark-mode');
        }
      })();
    </script>
    
    <link rel="icon" href="favicon.ico" type="image/x-icon">

</head>
<body>
    <div class="sidebar-overlay"></div>
<header class="mobile-header">
    <a href="/" class="mobile-logo"><img src="img/swe-llama.svg" alt="SWE-bench logo" class="sidebar-logo-icon">SWE-bench</a>
    <button class="sidebar-opener" aria-label="Open menu">
        <i class="fas fa-bars"></i>
    </button>
</header>

<aside class="sidebar" aria-label="Sidebar">
    <div class="sidebar-header">
         <a href="/" class="sidebar-logo"><img src="img/swe-llama.svg" alt="SWE-bench logo" class="sidebar-logo-icon">SWE-bench</a>
         <button class="mobile-nav-toggle" aria-label="Close menu">
             <i class="fas fa-times"></i>
         </button>
    </div>
    <nav class="sidebar-nav">
        <ul>
            <li><a href="index.html" class="nav-link" data-page="index">Leaderboards</a></li>
            <li class="nav-section-title">Benchmarks</li>
            <li><a href="original.html" class="nav-link" data-page="original">SWE-bench</a></li>
            <li><a href="verified.html" class="nav-link" data-page="verified">SWE-bench Verified</a></li>
            <li><a href="multilingual-leaderboard.html" class="nav-link" data-page="multilingual-leaderboard">SWE-bench Multilingual</a></li>
            <li><a href="multimodal.html" class="nav-link" data-page="multimodal">SWE-bench Multimodal</a></li>
            <li><a href="lite.html" class="nav-link" data-page="lite">SWE-bench Lite</a></li>
            <li class="nav-section-title">About</li>
            <li><a href="https://openreview.net/pdf?id=VTF8yNQM66" class="nav-link" data-page="paper">Paper <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://swebench.com/SWE-bench/" class="nav-link" data-page="docs">Docs <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="blog.html" class="nav-link" data-page="blog">Blog</a></li>
            <li><a href="contact.html" class="nav-link" data-page="contact">Contact</a></li>
            <li><a href="citations.html" class="nav-link" data-page="citations">Citations</a></li>
            <li><a href="press.html" class="nav-link" data-page="press">Press</a></li>
            <li><a href="submit.html" class="nav-link" data-page="submit">Submit</a></li>            
            <li class="nav-section-title">SWE-bench Family</li>
            <li><a href="https://mini-swe-agent.com/" class="nav-link" data-page="mini-swe-agent"><img src="img/swe-agent-icon.svg" alt="mini-SWE-agent icon" class="sidebar-family-icon">mini-SWE-agent <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://swesmith.com/" class="nav-link" data-page="swe-smith"><img src="img/swe-smith-icon.svg" alt="SWE-smith icon" class="sidebar-family-icon">SWE-smith <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://codeclash.ai/" class="nav-link" data-page="codeclash"><img src="img/codeclash.svg" alt="CodeClash icon" class="sidebar-family-icon">CodeClash <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://swe-rex.com/latest/" class="nav-link" data-page="swe-rex"><img src="img/swe-rex-icon.svg" alt="SWE-ReX icon" class="sidebar-family-icon">SWE-ReX <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://swebench.com/sb-cli/" class="nav-link" data-page="sb-cli"><img src="img/sb-cli-icon.svg" alt="SWE-bench CLI icon" class="sidebar-family-icon">SWE-bench CLI <i class="fas fa-external-link-alt"></i></a></li>
            <li><a href="https://swe-agent.com/latest/" class="nav-link" data-page="swe-agent"><img src="img/swe-agent-icon.svg" alt="SWE-agent icon" class="sidebar-family-icon">SWE-agent <span style="font-size: 0.8em;">(legacy)</span> <i class="fas fa-external-link-alt"></i></a></li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        <a href="https://github.com/swe-bench/SWE-bench" target="_blank" rel="noopener noreferrer" aria-label="SWE-bench on GitHub">
            <i class="fab fa-github"></i>
        </a>
        &nbsp;
        <a href="https://www.youtube.com/@SWE-bench" target="_blank" rel="noopener noreferrer" aria-label="SWE-bench on YouTube">
            <i class="fab fa-youtube"></i>
        </a>
        &nbsp;
        <a href="https://twitter.com/SWEbench" target="_blank" rel="noopener noreferrer" aria-label="SWE-bench on Twitter">
            <i class="fab fa-twitter"></i>
        </a>
        &nbsp;
        <a href="https://join.slack.com/t/swe-bench/shared_invite/zt-36pj9bu5s-o3_yXPZbaH2wVnxnss1EkQ" target="_blank" rel="noopener noreferrer" aria-label="Join the SWE-bench Slack">
            <i class="fab fa-slack"></i>
        </a>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
            <i class="fas fa-moon"></i>
        </button>
    </div>
</aside>
    
    <div class="main-content">
        
    <header class="page-header">
        <div class="container">
            <h1>[mini-SWE-agent] Roulette mode!</h1>
            <p style="color: var(--gray);">
                2025-08-19
                 &bull; by Kilian Lieret
                
            </p>
        </div>
    </header>


    <div class="container" style="margin-top: 2em;">
        <div class="blog-content">
            <p>What if your agent uses a different LM at every turn? We let mini-SWE-agent randomly switch between GPT-5 and Sonnet 4 and it scored higher on SWE-bench than with either model separately.</p>
<!-- more -->

<p>We use the same setup as in our <a href="post-250808-gpt5.html">previous blog post</a>, i.e., running with <a href="https://mini-swe-agent.com"><code>mini-swe-agent</code></a>, a minimalistic agent that doesn't have any tools other than bash (this is the basis of our new <a href="https://swebench.com">SWE-bench bash-only leaderboard</a>).</p>
<details class="note">
<summary>What is the <code>mini</code> agent?</summary>
<p><a href="https://mini-swe-agent.com"><code>mini</code></a> was designed to be the most minimalistic software engineering agent possible.
In fact, its <a href="https://github.com/SWE-agent/mini-swe-agent/blob/main/src/minisweagent/agents/default.py">main agent class</a>
has less than 100 lines of code (and that's literally the agent we use for our SWE-bench leaderboard!).</p>
<p>Compared to <a href="https://swe-agent.com">swe-agent</a>, <code>mini</code></p>
<ul>
<li><strong>Does not have any tools other than bash</strong> — it doesn't even use the tool-calling interface of the LMs. This means that you can run it with literally any model. When running in sandboxed environments you also don't need to take care of installing a single package — all it needs is bash.</li>
<li><strong>Has a completely linear history</strong> — every step of the agent just appends to the messages and that's it. So there's no difference between the trajectory and the messages that you pass on to the LM. Great for debugging &amp; fine-tuning.</li>
<li><strong>Executes actions with <code>subprocess.run</code></strong> — every action is completely independent (as opposed to keeping a stateful shell session running). This makes it trivial to execute the actions in sandboxes (literally just switch out <code>subprocess.run</code> with <code>docker exec</code>) and to scale up effortlessly.</li>
</ul>
</details>
<p>Now all we change is that instead of <code>model.query(history)</code>, we do <code>random.choice([model1, model2]).query(history)</code>,
that's it! </p>
<p>Other than configuring the models, the <a href="https://github.com/SWE-agent/mini-swe-agent/blob/main/src/minisweagent/config/extra/swebench_roulette.yaml">prompts also stay the same</a>.</p>
<figure>
  <img alt="We actually get higher SWE-bench scores than each of the models by themselves" src="img/blog/250820-mini-roulette/roulette_bar_v4.svg" width="50%" />
<br />
<figcaption>We actually get higher SWE-bench scores than each of the models by themselves</figcaption>
</figure>
<h2>Cost analysis</h2>
<div class="admonition note">
<p class="admonition-title">TL;DR</p>
<p>The cost ends up in the middle of the two models with around 30ct per instance at maximum performance.</p>
</div>
<p>Comparing costs with agents is always a bit tricky, because the agents spend most of their money on instances they cannot solve, and hence the average cost heavily depends on the runtime limits (e.g., the step limit).</p>
<p>Similar to our <a href="post-250808-gpt5.html">previous blog post</a>, we can chart the performance vs the step limit:</p>
<figure>
  <img alt="Performance vs step limit" src="img/blog/250820-mini-roulette/roulette_steps.svg" width="50%" />
<br />
<figcaption>Performance vs step limit</figcaption>
</figure>
<p>Showing that the performance gains become marginal at around a 50 step limit (despite the Sonnet 4 model invididually showing a very slow climb up to its maximum).
This curve is a lot more similar to the GPT-5 curve, which might be explained by the fact that either of the models can decide to end the run by submitting, so that we end up being closer to the earlier-submitting model.</p>
<p>Comparing the average cost with different step limits, we get a sigmoid-like curve, reaching around 30ct per instance at maximum performance, pretty much in the middle of the two models.</p>
<figure>
  <img alt="Performance vs average cost" src="img/blog/250820-mini-roulette/roulette_cost.svg" width="50%" />
<br />
<figcaption>Performance vs average cost</figcaption>
</figure>
<h2>More models and experiments</h2>
<p>We ran more experiments with more models at a smaller scale of just 50 instances (randomly picked from SWE-bench verified).
The GPT-5 and Sonnet 4 results were the most striking ones, and the only case where we got a higher score than with either model separately.
However, this was somewhat to be expected, as these are the only two models that are in a head-to-head race.</p>
<p>Whenever we combined models that were further apart in performance, the combined score (and cost) was somewhere in the middle between the two models (e.g., GPT-5 with Gemini 2.5 Pro, or GPT-5 mini with GPT-5 nano).
However, none of these combinations seemed to be particularly practically relevant.</p>
<p>Here's the numbers:</p>
<table>
<thead>
<tr>
<th>Models</th>
<th>Score (50 instances)</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPT-5 + Sonnet 4</td>
<td>39</td>
</tr>
<tr>
<td>GPT-5 + Sonnet 4 + Gemini 2.5 Pro</td>
<td>33</td>
</tr>
<tr>
<td>GPT-5 + Gemini 2.5 Pro</td>
<td>31</td>
</tr>
<tr>
<td>GPT-5 + GPT-5-mini</td>
<td>31</td>
</tr>
<tr>
<td>GPT-5 mini + GPT-5 nano</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>compared to the baselines of</p>
<table>
<thead>
<tr>
<th>Models</th>
<th>Score (50 instances)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sonnet 4</td>
<td>33</td>
</tr>
<tr>
<td>GPT-5</td>
<td>32</td>
</tr>
<tr>
<td>GPT-5-mini</td>
<td>32</td>
</tr>
<tr>
<td>Gemini 2.5 Pro</td>
<td>29</td>
</tr>
<tr>
<td>GPT-5-nano</td>
<td>16</td>
</tr>
</tbody>
</table>
<p>A word about statistical power: </p>
<ul>
<li>At just 50 instances, this small subsample is definitely not fully representative of the full 500.
  The instances we randomly drew seem to be a slightly easier subset of the data (just by chance),
  so all of the scores are slightly higher than the score on the full 500.</li>
<li>For the GPT-5 + Sonnet 4 combination, we repeated a similar experiment by alternating between the two models (rather than randomly switching) and solved 333 instances (66.6%, again outperforming both models separately).</li>
<li>For combinations with Gemini 2.5 Pro, we repeated them with slightly more instances, but did not see particular improvements.</li>
</ul>
<h2>Running it yourself</h2>
<p>To make this a bit nicer to use, we made a small wrapper model class <a href="https://github.com/SWE-agent/mini-swe-agent/blob/main/src/minisweagent/models/extra/roulette.py">here</a>).</p>
<p>Currently, you can use it with SWE-bench evaluation simply by switching to the <a href="https://github.com/SWE-agent/mini-swe-agent/blob/main/src/minisweagent/config/extra/swebench_roulette.yaml"><code>swebench_roulette</code> config</a>:</p>
<pre class="highlight"><code class="language-bash">mini-extra swebench \
  --subset verified \
  --split test \
  --shuffle \
  -o roulette-sonnet4-gpt5 \
  --workers 20 \
  -c swebench_roulette</code></pre>
        </div>
        
        <hr style="margin-top: 3em;" />
        <p style="text-align: center;">
            <a href="blog.html">&larr; Back to Blog</a>
        </p>
    </div>

        
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-copyright">
                        &copy; 2025 SWE-bench Team. All rights reserved.
                    </div>
                    <div class="footer-links">
                        <a href="https://github.com/swe-bench/SWE-bench" target="_blank">GitHub</a>
                        <a href="https://huggingface.co/collections/SWE-bench/benchmarks-68113bc99eb3a64a91ea33c9" target="_blank">HuggingFace</a>
                        <a href="https://arxiv.org/abs/2310.06770" target="_blank">Paper</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Common JS files -->
    <script src="js/mainResults.js"></script>
    <script src="js/citation.js"></script>
    <script src="js/citationFormat.js"></script>
    
    <!-- Page-specific JS files will be injected here -->
    

    <script>
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            
            // Move dark-mode class from documentElement to body if present
            if (document.documentElement.classList.contains('dark-mode')) {
                document.body.classList.add('dark-mode');
                document.documentElement.classList.remove('dark-mode');
            }
            
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    document.body.classList.toggle('dark-mode');
                    
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                });
            }
            
            prefersDarkScheme.addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        document.body.classList.add('dark-mode');
                    } else {
                        document.body.classList.remove('dark-mode');
                    }
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            
            const currentPath = window.location.pathname;
            const currentPage = currentPath.split('/').pop().split('.')[0] || 'index';
            
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                const linkPage = link.getAttribute('data-page');
                if (linkPage === currentPage) {
                    link.classList.add('active');
                }
                
                if (currentPage === 'index' && window.location.hash) {
                    const currentHash = window.location.hash.substring(1);
                    if (linkPage === currentHash) {
                        link.classList.add('active');
                    }
                }
            });
            
            const sidebarOpener = document.querySelector('.sidebar-opener');
            const sidebarCloser = document.querySelector('.sidebar .mobile-nav-toggle');
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            
            if ((sidebarOpener || sidebarCloser) && sidebar && overlay) {
                function toggleMenu() {
                    sidebar.classList.toggle('open');
                    overlay.classList.toggle('active');
                }
                
                function openMenu() {
                    sidebar.classList.add('open');
                    overlay.classList.add('active');
                }
                
                function closeMenu() {
                    sidebar.classList.remove('open');
                    overlay.classList.remove('active');
                }
                
                if (sidebarOpener) {
                    sidebarOpener.addEventListener('click', function(e) {
                        e.preventDefault();
                        openMenu();
                    });
                }
                
                if (sidebarCloser) {
                    sidebarCloser.addEventListener('click', function(e) {
                        e.preventDefault();
                        closeMenu();
                    });
                }
                
                overlay.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeMenu();
                });
                
                navLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (sidebar.classList.contains('open')) {
                            closeMenu();
                        }
                    });
                });
                
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && sidebar.classList.contains('open')) {
                        closeMenu();
                    }
                });
            }
        });
    </script>

    
    <!-- Optional page-specific scripts -->
    
</body>
</html> 